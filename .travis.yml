language: go

go:
  - "1.8" 

# Specify which branches to build using a safelist
branches:
  only:
    - hugo
    
install:
  - go get -d github.com/spf13/hugo 
  - cd $GOPATH/src/github.com/spf13/hugo
  - git checkout tags/v0.20.7
  - go get github.com/spf13/hugo 

script:
  - hugo

deploy:
  provider: pages
  skip-cleanup: true
  local-dir: public
  target-branch: gh-pages
  github-token: $GITHUB_TOKEN
  fqdn: blog.yuantops.com
  keep-history: true
  on:
    branch: hugo