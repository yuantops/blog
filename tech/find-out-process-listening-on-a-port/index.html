<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Linux确定监听某个端口的进程 // Yuantops&#39; Blog</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta property="og:title" content="Linux确定监听某个端口的进程" />
<meta property="og:description" content="在Linux下，如何确定一个端口正被哪个进程(Process)占用?如何确定一个运行中的进程占用了哪些端口？这是一篇小笔记，介绍几个常用的命令。" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://blog.yuantops.com/tech/find-out-process-listening-on-a-port/" />


    <link href="" rel="alternate" type="application/rss+xml" title="Yuantops&#39; Blog" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="https://blog.yuantops.com/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://blog.yuantops.com/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://blog.yuantops.com/css/style.css">

    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <meta name="description" content="在Linux下，如何确定一个端口正被哪个进程(Process)占用?如何确定一个运行中的进程占用了哪些端口？这是一篇小笔记，介绍几个常用的命令。">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <meta name="generator" content="Hugo 0.20.7" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="https://blog.yuantops.com/">Yuantops&#39; Blog</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/archives/">Archives</a>
                
                <a class="main-nav-link" href="/about/">About</a>
                
                <a class="main-nav-link" href="/index.xml">RSS</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>

    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">Linux确定监听某个端口的进程</h1>
        </header>
        
        <div class="article-meta">
            <a href="/tech/find-out-process-listening-on-a-port/" class="article-date">
                <time datetime='2015-01-22T00:00:00.000&#43;00:00' itemprop="datePublished">2015-01-22</time>
            </a>
            
            
            <div class="post-categories">
                <div class="article-category">
                    
                    
                    <a class="article-category-link" href="https://blog.yuantops.com//categories/tech">Tech</a>
                    
                </div>
		
		<div class="article-category">
	      	  560字, 约2分钟读完
		</div>
	    

            </div>
            

	    
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            

<p>比较常见的命令有:</p>

<ul>
<li><strong>netstat</strong><br /></li>
<li><strong>lsof</strong><br /></li>
<li><strong>ps</strong></li>
<li><strong>/proc/$pid</strong><br /></li>
</ul>

<h3 id="netstat">netstat</h3>


# netstat -tuapn


<p>参数解释:</p>

<pre><code>    -t tcp协议   
    -u udp协议   
    -a 显示listening和non-listening端口   
    -p 显示process ID  
    -n 显示数字IP，而不是字符形式的hostname   
</code></pre>

<p>可以用grep命令对上条命令的输出进行过滤，显示某条端口的信息。</p>

<h3 id="lsof">lsof</h3>


# lsof -i :4000


<p>lsof列出机器上打开的所有文件。这条命令输出端口4000被占用的情况。它的输出形如<br />
        COMMAND    PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br />
        ruby-mri 10482 yyuan   11u  IPv4 252906      0t0  TCP localhost:terabase (LISTEN)</p>

<p>可以看到进程号10482的进程占用了TCP端口4000。</p>

<h3 id="ps">ps</h3>


# ps aux


<p>参数解释:
        -a 显示所有用户的进程<br />
        -u 显示进程的user/owner<br />
        -x 也显示不与终端关联的进程</p>

<p>同样地，也可以用grep命令对上条命令的输出进行过滤，显示某条端口的信息。</p>

<h3 id="proc-pid">/proc/$pid</h3>

<p>下面是该目录下，各个文件的作用:</p>


..............................................................
File		Content
clear_refs	Clears page referenced bits shown in smaps output
cmdline		Command line arguments
cpu			Current and last cpu in which it was executed	(2.4)(smp)
cwd			Link to the current working directory
environ		Values of environment variables
exe			Link to the executable of this process
fd			Directory, which contains all file descriptors
maps		Memory maps to executables and library files	(2.4)
mem			Memory held by this process
root		Link to the root directory of this process
stat		Process status
statm		Process memory status information
status		Process status in human readable form
wchan		If CONFIG_KALLSYMS is set, a pre-decoded wchan
pagemap		Page table
stack		Report full stack trace, enable via CONFIG_STACKTRACE
smaps		a extension based on maps, showing the memory consumption of
each 		mapping and flags associated with it
...............................................................


<h2 id="具体应用">具体应用</h2>

<h3 id="找到进程3813的owener">找到进程3813的owener</h3>


# ps aux | grep 3813


<p>或者 cat /proc/3813/environ , 查看USER字段。</p>

<h3 id="看到一个根本不认识的端口号">看到一个根本不认识的端口号</h3>

<p>/etc/services文件用来将协议/端口号映射到服务的名字。可以用grep命令来匹配某个不认识的端口。</p>

        </div>

        
        
        <div class="article-toc" style="display:none;">
            <h3>Contents</h3>
            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#netstat">netstat</a></li>
<li><a href="#lsof">lsof</a></li>
<li><a href="#ps">ps</a></li>
<li><a href="#proc-pid">/proc/$pid</a></li>
</ul></li>
<li><a href="#具体应用">具体应用</a>
<ul>
<li><a href="#找到进程3813的owener">找到进程3813的owener</a></li>
<li><a href="#看到一个根本不认识的端口号">看到一个根本不认识的端口号</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
        
        

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
        <script>
            (function() {
                var $toc = $('#TableOfContents');
                if ($toc.length > 0) {
                    var $window = $(window);

                    function onScroll(){
                        var currentScroll = $window.scrollTop();
                        var h = $('.article-entry h1, .article-entry h2, .article-entry h3, .article-entry h4, .article-entry h5, .article-entry h6');
                        var id = "";
                        h.each(function (i, e) {
                            e = $(e);
                            if (e.offset().top - 10 <= currentScroll) {
                                id = e.attr('id');
                            }
                        });
                        var active = $toc.find('a.active');
                        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

                        active.each(function (i, e) {
                            $(e).removeClass('active').siblings('ul').hide();
                        });
                        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                            $(e).children('a').addClass('active').siblings('ul').show();
                        });
                    }

                    $window.on('scroll', onScroll);
                    $(document).ready(function() {
                        $toc.find('a').parent('li').find('ul').hide();
                        onScroll();
                        document.getElementsByClassName('article-toc')[0].style.display = '';
                    });
                }
            })();
        </script>
        


        
	
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://blog.yuantops.com//tags/linux">Linux
                    </a>
                </li>
                
            </ul>
        </footer>
        
	
    </div>
    <nav id="article-nav">
    
    <a href="/tech/video-format-and-container-study/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title"><span>&lt;</span>&nbsp;
            视频格式学习笔记
        </div>
    </a>
    
    
    <a href="/tech/install-tomcat-plugin-in-eclipse/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">Eclipse中添加Tomcat插件&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>
</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2012-2018 @yuantops&nbsp; </br>
            Proudly powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos">Minos</a>
        </div>
    </div>
    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-57420914-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha256-ExtbCSBuYA7kq1Pz362ibde9nnsHYPt6JxuxYeZbU+c=" crossorigin="anonymous"></script>
        <script>renderMathInElement(document.body);</script>
    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>

</div>
</body>
</html>
